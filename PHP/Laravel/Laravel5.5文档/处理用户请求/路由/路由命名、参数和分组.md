# 路由参数
## 1、 必选参数
```php
Route::get('user/{id}', function ($id) {
    return 'User ' . $id;
});
```
在浏览器中访问`http://blog.dev/user/1`，有：  
```
User 1
```
定义多个参数：  
```php
Route::get('posts/{post}/comments/{comment}', function ($postId, $commentId) {
    return $postId . '-' . $commentId;
});
```
>注： 路由参数不能包含`-`字符，如果需要可用`_`代替。  
路由参数被注入到路由回调/控制器取决于他们的顺序，与回调/控制器名称无关。  

## 2、 可选参数
在参数后加`?`标记可选参数。  
需要给相应的变量默认值。  
```php
Route::get('user/{name?}', function ($name = null) {
    return $name;
});

Route::get('user/{name?}', function ($name = 'John') {
    return $name;
});
```

## 3、 正则约束
`where`方法：  
```php
Route::get('user/{name}', function ($name) {
    // name 必须是字母且不能为空
})->where('name', '[A-Za-z]+');

Route::get('user/{id}', function ($id) {
    // id 必须是数字
})->where('id', '[0-9]+');

Route::get('user/{id}/{name}', function ($id, $name) {
    // 同时指定 id 和 name 的数据格式
})->where(['id' => '[0-9]+', 'name' => '[a-z]+']);
```

**全局约束:**  
如果想要路由参数在全局范围内被给定正则表达式约束，可以使用 `pattern` 方法。需要在 `RouteServiceProvider` 类的 `boot` 方法中定义这种约束模式：  
```php
/**
 * 定义路由模型绑定，模式过滤器等
 *
 * @param  \Illuminate\Routing\Router  $router
 * @return void
 * @translator  http://laravelacademy.org
 */
public function boot()
{
    Route::pattern('id', '[0-9]+');
    parent::boot();
}
```
一旦模式被定义，将会自动应用到所有包含该参数名的路由中：  
```php
Route::get('user/{id}', function ($id) {
    // 只有当 {id} 是数字时才会被调用
});
```
除此之外，该模式还会被应用到诸如下面这些路由参数上：  
```php
Route::get('post/{id}', function ($id) {
    // 只有当 {id} 是数字时才会被调用
});

Route::get(`product/{id}', function ($id) {
    // 只有当 {id} 是数字时才会被调用
});
```


# 命名路由
命名路由为生成 URL 或重定向提供了方便，实现起来也很简单，在路由定义之后使用 `name` 方法链的方式来定义该路由的名称：  
```php
Route::get('user/profile', function () {
    // 通过路由名称生成 URL
    return 'my url: ' . route('profile');
})->name('profile');
```
还可以为控制器动作指定路由名称：  
```php
Route::get('user/profile', 'UserController@showProfile')->name('profile');
```
这样我们就可以通过以下方式定义重定向：  
```php
Route::get('redirect', function() {
    // 通过路由名称进行重定向
    return redirect()->route('profile');
});
```

## 1、 为命名路由生成URL
```php
$url = route('profile');
```
带参数：  
```php
Route::get('user/{id}/profile', function ($id) {
    $url = route('profile', ['id' => $id]);
    return $url;
})->name('profile');
```

## 2、 检查当前路由
如果你想要判断当前请求是否被路由到给定命名路由，可以使用 Route 实例上的 `named` 方法，例如，你可以从路由中间件中检查当前路由名称：  
```php
/**
 * 处理输入请求
 *
 * @param  \Illuminate\Http\Request  $request
 * @param  \Closure  $next
 * @return mixed
 */
public function handle($request, Closure $next)
{
    if ($request->route()->named('profile')) {
        //
    }

    return $next($request);
}
```
